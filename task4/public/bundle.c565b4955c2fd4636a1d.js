(()=>{let e=document.getElementById("list"),t=document.getElementById("grid"),n=document.getElementById("listView"),o=document.getElementById("employees");e.onclick=function(){n.style.display="",o.style.display="none"},t.onclick=function(){n.style.display="none",o.style.display=""};const l=document.getElementById("employees"),s=document.getElementById("listView"),d=document.getElementById("result"),i=document.getElementById("search");let a=[];var c;(()=>{let e=new XMLHttpRequest;e.onreadystatechange=()=>{if(4===e.readyState&&200===e.status){const n=async()=>{a=JSON.parse(e.response),c=a,u(a),p(a)};function t(e){e.preventDefault(),r(a),m()}for(key in n(),document.getElementById("form").addEventListener("submit",t,{once:!0}),document.getElementById("form1").addEventListener("submit",t,{once:!0}),a)localStorage.setItem(`${a[key].password}`,JSON.stringify(a));y(a)}},e.open("GET","http://localhost:1000/home"),e.send()})();const r=e=>{const t=document.querySelector("#email-signIn").value,n=document.querySelector("#password-signIn").value;for(key in e){let o=JSON.parse(localStorage.getItem(`${e[key].password}`));o[key].contacts.email==t&&o[key].password==n?window.open(`http://localhost:1000/person/${e[key].title.replace(" ","_")}`):o[key].password!=n?document.getElementById("password-signIn").style.border="1px solid red":o[key].contacts.email!=t&&(document.getElementById("email-signIn").style.border="1px solid red")}},m=()=>{const e=document.querySelector("#email-signUp").value,t=document.querySelector("#password-signUp").value,n=document.querySelector("#name").value,o=document.querySelector("#surname").value,l=document.querySelector("#role").value,s={title:n,text:o,role:l,department:{icon:"img/suitcase.png",specialty:"Web & Mobile"},room:{icon:"img/door.png",number:981},contacts:{internalPhone:"765",mobilePhone:"+375(29)765-34-65",email:e},profileInfo:{hireDate:"9 Jan 2019",status:"Active"},employmentInfo:{start:["9 Jan 2018","19 Feb 2019"],dayDuration:["5 hours","8 hours"]},image:"https://github.com/ValentinaJurievna/photos/blob/main/5.png?raw=true",password:t};if(localStorage.setItem(t,JSON.stringify(s)),"Employee"==l){document.getElementById("modal-order").style.display="none",document.getElementById("settings").style.display="none";const e=JSON.parse(localStorage.getItem(t));a.push(e),u(a);let n=a.length;d.innerHTML=n}};var y=e=>{let t=Object.keys(localStorage);for(let n=0;n<t.length;n++){const o=JSON.parse(localStorage.getItem(t[n]));if("Employee"===o.role){e.push(o),u(e);let t=e.length;d.innerHTML=t}}};document.getElementById("sort-asc").onclick=function(){c.sort(((e,t)=>e.title>t.title?1:-1)),u(c)},document.getElementById("sort-desc").onclick=function(){c.sort(((e,t)=>e.title<t.title?1:-1)),u(c)},i.addEventListener("keyup",(e=>{const t=e.target.value.toLowerCase();c=a.filter((e=>e.title.toLowerCase().includes(t)||e.text.toLowerCase().includes(t))),u(c),p(c);var n=c.length;d.innerHTML=n}));var u=e=>{const t=e.map((e=>`\n            <div class="card p-3 col-5 mt-3" id = "${e.title}" >\n                <img src="${e.image}" class="card__img mx-auto d-block img-fluid">\n                    <div class="card__body">\n                        <h5 class="card__title mt-3">${e.title}</h5>\n                        <p class="card__text">${e.text}</p>\n                    </div>\n                    <div class="card__body mt-3">\n                        <a href="#" class="card__link"><img src="${e.department.icon}" width="16" height="16" class="img-fluid" alt="">&ensp;${e.department.specialty}</a>\n                        <a href="#" class="card__link ml-5"><img src="${e.room.icon}" class="img-fluid" alt="">&ensp;${e.room.number}</a>\n                    </div>\n            </div>  \t\n    `)).join("");l.innerHTML=t};const p=e=>{const t=e.map((e=>`\n        <tr>\n        <td width="300">${e.title}</td>\n        <td width="300">${e.text}</td>\n        <td width="300">${e.department.specialty}</td>\n        <td width="300">${e.room.number}</td> \n        </tr>            \t\t\t\n    `)).join("");s.innerHTML=t};document.getElementById("employees").onclick=e=>{let t=e.target;for(;""==t.id;)t=t.parentNode,window.open(`http://localhost:1000/person/${t.id.replace(" ","_")}`);"employees"!=t.id&&getEmploee(t.id)};const g=document.getElementById("modal-button"),I=document.getElementById("signUp"),h=document.getElementById("signIn"),E=document.getElementById("modal-signIn"),f=document.getElementById("modal-signUp");g.addEventListener("click",(function(){var e=document.getElementById("modal-order");document.getElementsByClassName("close")[0].onclick=function(){e.style.display="none"},e.onclick=function(t){window.e,t.target==this&&(e.style.display="none")},e.style.display="block"})),I.addEventListener("click",(function(){E.style.display="none",f.style.display=""})),h.addEventListener("click",(function(){E.style.display="",f.style.display="none"}))})();